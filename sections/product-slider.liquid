<section class="{{section.settings.margins}}">
    <div class="tw-text-22px/28px xl:tw-max-w-1336px tw-mx-5 md:tw-mx-10 xl:tw-mx-auto tw-mb-7 tw-font-semibold tw-text-center tw-border-b tw-leading-em">
      <span class="tw-px-3 tw-bg-white">&nbsp;{{section.settings.heading}}&nbsp;<span>
    </div> 
      
    <div class="tw-flex tw-justify-center tw-mt-4 tw-max-w-1336px tw-mx-auto">

      <!-- Scroll button for swiper -->
      <div class="button-prev--product tw-mx-6 tw-self-center">
        <img class="tw-w-8" src="https://cdn.shopify.com/s/files/1/0561/8571/6895/files/arrow-product-left.svg?v=1682691853" alt="View previous item in slider">
      </div>
      
      <!-- Slideshow of products -->
      <div style="padding-top: 1rem;" class="swiper-container swiper-container--products tw-flex-grow-0 tw-w-full xl:tw-max-w-1336px tw-mt-4 tw-pt-4">
        
        <div class="swiper-wrapper">

          <!-- Loop through Products for slides -->
          {% for product in collections.all.products %}
            <div class="swiper-slide tw-flex tw-items-center tw-justify-center">
              {% include 'product-card' %}
            </div>
          {% endfor %}
        </div>
      
      </div>

      <!-- Scroll button for swiper -->
        <div class="button-next--product tw-mx-6 tw-self-center">
          <img class="tw-w-8" src="https://cdn.shopify.com/s/files/1/0561/8571/6895/files/arrow-product-right.svg?v=1682691853" alt="View next item in slider">
        </div>
    </div>
    {% if section.settings.use_button  %}
    <div class="tw-mt-8 tw-text-center">
      <a href="{{ section.settings.button_link }}" class="tw-w-48 tw-text-center primary__button tw-py-3">{{ section.settings.button_text }}</a>
    </div>
    {% endif %}
</section>

<script src="https://unpkg.com/swiper@6.8.2/swiper-bundle.js"></script>
<script src="https://unpkg.com/swiper@6.8.2/swiper-bundle.min.js"></script>

<script>
    const productSwiper = new Swiper('.swiper-container--products', {
        spaceBetween: 5,
        speed: 1500,
        loop: false, 
        breakpoints: {
          768: {
            slidesPerView: 2,
            slidesPerGroup: 1,
          },
          1024: {
            slidesPerView: 4,
            slidesPerGroup: 1
          }
        },
        fadeEffect: {
            crossFade: false,
        },
        navigation: {
          nextEl: ".button-next--product",
          prevEl: ".button-prev--product",
        },
      });
  </script>

{% schema %}
  {
    "name": "Product Slider",
    "settings": [
      {
          "type": "text",
          "id": "heading",
          "label": "Product list title"
      },
      {
          "type": "text",
          "id": "margins",
          "label": "Margin Class"
      }, 
      {
        "id": "use_button",
        "type": "checkbox",
        "label": "Use Button"
      },
      {
        "id": "button_text",
        "type": "text",
        "label": "Button text"
      },
      {
        "id": "button_link",
        "type": "url",
        "label": "Button link"
      }
    ],
    "presets": [
      {
        "name": "Product Slider",
        "category": "Product page"
      }
    ]
  }
{% endschema %}